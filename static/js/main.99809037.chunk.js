(this.webpackJsonptable=this.webpackJsonptable||[]).push([[0],[,,,,,,,function(t,e,n){t.exports={wrapper:"ChangeBackground_wrapper__2Uwxj",colors:"ChangeBackground_colors__Je-TV",opened:"ChangeBackground_opened__2cpzw",colorButton:"ChangeBackground_colorButton__2QEDl",transparent:"ChangeBackground_transparent__mqomV"}},,,function(t,e,n){t.exports={wrapper:"Button_wrapper__pj90c",active:"Button_active__FWtIw",disabled:"Button_disabled__1AAMG"}},function(t,e,n){t.exports={wrapper:"Table_wrapper__2oJSk",table:"Table_table__3Cw9e",filled:"Table_filled__wq5i1"}},,function(t,e,n){t.exports={wrapper:"Col_wrapper__3FddR",selected:"Col_selected__29n3t"}},function(t,e,n){t.exports={wrapper:"AddRow_wrapper__3NW4Q",addButton:"AddRow_addButton__1hGob"}},,function(t,e,n){t.exports={wrapper:"TextEdit_wrapper__3ANjp"}},function(t,e,n){t.exports={techCol:"Row_techCol__HSNZB"}},function(t,e,n){t.exports={wrapper:"SelectionMenu_wrapper__2E3fb"}},function(t,e,n){t.exports={wrapper:"AddCol_wrapper__2LYv8"}},,,,,,,function(t,e,n){"use strict";n.r(e);var c=n(1),a=n.n(c),o=n(15),r=n.n(o),d=n(4),i=n(5),s=c.createContext(null),l={editableCol:0,touched:!1,selectionState:{selected:!1},rows:[{id:1,cols:[{content:"",type:"text",display:!0,id:1},{content:"",type:"text",display:!0,id:2}]}]},u=n(2),b=n(3),p=Object(b.createStandardAction)("TABLE/SET_START_SELECTION")(),f=Object(b.createStandardAction)("TABLE/SET_END_SELECTION")(),j=Object(b.createStandardAction)("TABLE/SET_SELECTED_SELECTION")(),O=Object(b.createStandardAction)("TABLE/SET_TOUCHED")(),w=Object(b.createStandardAction)("TABLE/CLEAR_SELECTION")(),_=Object(b.createStandardAction)("TABLE/ROWS_UPDATE")(),h=Object(b.createStandardAction)("TABLE/SET_EDITABLE_COL")(),x=Object(b.createStandardAction)("TABLE/UPDATE_COL_CONTENT")(),S=Object(b.createStandardAction)("TABLE/UPDATE_COL_BACKGROUND")(),m=Object(b.createReducer)(l).handleAction(p,(function(t,e){var n=e.payload.positionStart;return Object(u.a)(Object(u.a)({},t),{},{selectionState:Object(u.a)(Object(u.a)({},t.selectionState),{},{start:n})})})).handleAction(f,(function(t,e){var n=e.payload.positionEnd;return Object(u.a)(Object(u.a)({},t),{},{selectionState:Object(u.a)(Object(u.a)({},t.selectionState),{},{end:n})})})).handleAction(O,(function(t,e){var n=e.payload.touched;return Object(u.a)(Object(u.a)({},t),{},{touched:n})})).handleAction(j,(function(t,e){var n=e.payload.selected;return Object(u.a)(Object(u.a)({},t),{},{selectionState:Object(u.a)(Object(u.a)({},t.selectionState),{},{selected:n})})})).handleAction(w,(function(t){return Object(u.a)(Object(u.a)({},t),{},{selectionState:{selected:!1}})})).handleAction(_,(function(t,e){var n=e.payload.rows;return Object(u.a)(Object(u.a)({},t),{},{rows:n})})).handleAction(h,(function(t,e){var n=e.payload.editableCol;return Object(u.a)(Object(u.a)({},t),{},{editableCol:n})})).handleAction(x,(function(t,e){var n=e.payload,c=n.colId,a=n.rowId,o=n.content,r=t.rows;return r[a-1].cols[c-1].content=o,Object(u.a)(Object(u.a)({},t),{},{rows:r})})).handleAction(S,(function(t,e){var n=e.payload,c=n.colId,a=n.rowId,o=n.background,r=t.rows;return r[a-1].cols[c-1].background=o,Object(u.a)(Object(u.a)({},t),{},{rows:r})})),I={content:"",type:"text",display:!0},v=["#fff1b8","#ffffb8","#f4ffb8","#d9f7be","#b5f5ec","#bae7ff","#d6e4ff","#efdbff","#ffccc7"],E=n(6),C=n.n(E),g=function(t,e){return{row:{min:t.rowId<e.rowId?t.rowId:e.rowId,max:t.rowId<e.rowId?e.rowId:t.rowId},col:{min:t.colId<e.colId?t.colId:e.colId,max:t.colId<e.colId?e.colId:t.colId}}},A=function(t,e,n){var c=g(t,e);return n.rowId>=c.row.min&&n.rowId<=c.row.max&&n.colId>=c.col.min&&n.colId<=c.col.max},T=n(13),y=n.n(T),B=n(16),k=n.n(B),N=n(0),L=function(t){var e=t.value,n=t.colId,o=t.rowId,r=t.background,d=t.setEditMode,i=a.a.useContext(s).dispatch,l=Object(c.useRef)(null);a.a.useEffect((function(){l.current&&l.current.focus()}),[]);var u=function(t){i(x({rowId:o,colId:n,content:t.target.value})),d(!1)};return Object(N.jsx)("input",{ref:l,defaultValue:e,onBlur:u,onKeyDown:function(t){"Enter"===t.code&&u(t)},className:k.a.wrapper,style:{background:r}})},D=function(t){var e=t.colData,n=t.rowId,o=a.a.useState(!1),r=Object(i.a)(o,2),l=r[0],u=r[1],b=a.a.useState(!1),_=Object(i.a)(b,2),h=_[0],x=_[1],S=a.a.useContext(s),m=S.state,I=S.dispatch,v=Object(c.useRef)(null);if(a.a.useEffect((function(){m.selectionState.start&&m.selectionState.end?u(A(m.selectionState.start,m.selectionState.end,{rowId:n,colId:e.id})):u(!1)}),[m,n,e,v]),!e.display)return null;return Object(N.jsxs)("td",{id:"col-".concat(n,"-").concat(e.id),onMouseDown:function(){I(w()),I(O({touched:!0})),I(p({positionStart:{rowId:n,colId:e.id}}))},onMouseUp:function(){I(O({touched:!1})),I(j({selected:!0})),I(f({positionEnd:{rowId:n,colId:e.id}}))},onMouseEnter:function(){m.touched&&I(f({positionEnd:{rowId:n,colId:e.id}}))},onDoubleClick:function(){return x(!0)},onBlur:function(){return console.log("vdfvsd")},colSpan:e.colSpan,rowSpan:e.rowSpan,className:C()(y.a.wrapper,Object(d.a)({},y.a.selected,l)),style:{background:e.background},children:[h&&"text"===e.type&&Object(N.jsx)(L,{value:e.content,background:e.background,rowId:n,colId:e.id,setEditMode:x}),!h&&e.content]})},R=function(t,e){var n=t[0]?t[0].cols.length:1,c={id:e+1,cols:new Array(n).fill(I).map((function(t,e){return Object(u.a)(Object(u.a)({},t),{},{id:e+1})}))},a=t.map((function(t){return t.id>e&&(t.id=t.id+1),t}));return a.splice(e,0,c),a},M=n(14),U=n.n(M),J=function(t){var e=t.rowId,n=a.a.useContext(s),c=n.dispatch,o=n.state;return Object(N.jsx)("div",{className:U.a.wrapper,children:Object(N.jsx)("button",{className:U.a.addButton,onClick:function(){c(_({rows:R(o.rows,e)}))},children:"+"})})},P=n(17),G=n.n(P),V=function(t){var e=t.rowData;return Object(N.jsxs)("tr",{style:{height:e.height||45},children:[Object(N.jsx)("td",{className:G.a.techCol,children:Object(N.jsx)(J,{rowId:e.id})}),e.cols.map((function(t){return Object(N.jsx)(D,{colData:t,rowId:e.id},t.id)}))]})},W=n(10),q=n.n(W),F=function(t){var e,n=t.children,c=t.onClick,a=t.className,o=t.style,r=t.active,i=void 0!==r&&r,s=t.disabled,l=void 0!==s&&s;return Object(N.jsx)("button",{disabled:l,onClick:c,className:C()(q.a.wrapper,a,(e={},Object(d.a)(e,q.a.active,i),Object(d.a)(e,q.a.disabled,l),e)),style:o,children:n})},H=n.p+"static/media/merge.3b22c6cb.svg",K=function(){var t=a.a.useState(0),e=Object(i.a)(t,2),n=e[0],c=e[1],o=a.a.useContext(s),r=o.state,d=o.dispatch;if(a.a.useEffect((function(){c(function(t){if(t.start&&t.end){var e=g(t.start,t.end);return(e.row.max-e.row.min+1)*(e.col.max-e.col.min+1)}return 0}(r.selectionState))}),[r]),n<=1)return null;return Object(N.jsx)(F,{onClick:function(){!function(t,e){var n=t.selectionState,c=t.rows;if(n.end&&n.start){var a=g(n.start,n.end),o=a.col.max+1-a.col.min,r=a.row.max+1-a.row.min,d={row:a.row.min,col:a.col.min};o>1&&(c[d.row-1].cols[d.col-1].colSpan=o),r>1&&(c[d.row-1].cols[d.col-1].rowSpan=r),c.forEach((function(t){t.cols=t.cols.map((function(e){return!A(n.start,n.end,{rowId:t.id,colId:e.id})||d.row===t.id&&d.col===e.id?e:Object(u.a)(Object(u.a)({},e),{},{display:!1})}))})),e(_({rows:c})),e(w())}}(r,d)},children:Object(N.jsx)("img",{src:H,alt:"Merge",style:{width:40}})})},Q=n.p+"static/media/bg-colors.a8cef9f9.svg",z=n(7),Y=n.n(z),Z=function(){var t=a.a.useContext(s),e=t.state,n=t.dispatch,c=a.a.useState(!1),o=Object(i.a)(c,2),r=o[0],l=o[1],u=function(t){if(e.selectionState.start&&e.selectionState.end){var c=g(e.selectionState.start,e.selectionState.end);n(S({rowId:c.row.min,colId:c.col.min,background:t}))}};return Object(N.jsxs)("div",{className:Y.a.wrapper,children:[Object(N.jsx)(F,{active:r,onClick:function(){return l((function(t){return!t}))},children:Object(N.jsx)("img",{src:Q,alt:""})}),Object(N.jsxs)("div",{className:C()(Y.a.colors,Object(d.a)({},Y.a.opened,r)),children:[Object(N.jsx)("button",{onClick:function(){return u("transparent")},className:C()(Y.a.colorButton,Y.a.transparent)}),v.map((function(t){return Object(N.jsx)("button",{onClick:function(){return u(t)},style:{background:t},className:Y.a.colorButton},t)}))]})]})},X=n(18),$=n.n(X),tt=function(){var t=a.a.useContext(s).state,e=a.a.useState(),n=Object(i.a)(e,2),c=n[0],o=n[1];return a.a.useEffect((function(){t.selectionState.start&&t.selectionState.end&&o(function(t,e){var n=g(t,e),c=document.getElementById("col-".concat(n.row.min,"-").concat(n.col.min));return c?{top:c.offsetTop+8,left:c.offsetLeft+8}:{top:0,left:0}}(t.selectionState.start,t.selectionState.end))}),[t]),t.selectionState.selected?Object(N.jsxs)("div",{className:$.a.wrapper,style:c,children:[Object(N.jsx)(K,{}),Object(N.jsx)(Z,{})]}):null},et=n(20),nt=n.p+"static/media/plus-circle.74f4afce.svg",ct=n(19),at=n.n(ct),ot=function(){var t=a.a.useContext(s),e=t.state,n=t.dispatch;return e.rows.length?Object(N.jsxs)(F,{onClick:function(){var t;n(_({rows:(t=e.rows,t.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{cols:[].concat(Object(et.a)(t.cols),[Object(u.a)({id:t.cols.length+1},I)])})})))}))},className:at.a.wrapper,children:[Object(N.jsx)("img",{src:nt,alt:""})," Cell"]}):null},rt=n(11),dt=n.n(rt),it=function(t){var e=t.onChange,n=a.a.useReducer(m,l),c=Object(i.a)(n,2),o=c[0],r=c[1];return a.a.useEffect((function(){e&&"function"===typeof e&&e(o.rows)}),[o,e]),Object(N.jsx)(s.Provider,{value:{dispatch:r,state:o},children:Object(N.jsxs)("div",{className:dt.a.wrapper,children:[Object(N.jsx)("table",{className:C()(dt.a.table,Object(d.a)({},dt.a.filled,!!o.rows.length)),children:Object(N.jsx)("tbody",{children:o.rows.map((function(t){return Object(N.jsx)(V,{rowData:t},t.id)}))})}),Object(N.jsx)(tt,{}),Object(N.jsx)(ot,{})]})})};var st=function(){return Object(N.jsx)("div",{className:"App",children:Object(N.jsx)(it,{onChange:function(t){return console.log(t)}})})};r.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(st,{})}),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.99809037.chunk.js.map