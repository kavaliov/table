(this.webpackJsonptable=this.webpackJsonptable||[]).push([[0],{11:function(t,e,c){t.exports={wrapper:"Button_wrapper__pj90c",active:"Button_active__FWtIw",disabled:"Button_disabled__1AAMG"}},12:function(t,e,c){t.exports={wrapper:"Table_wrapper__2oJSk",table:"Table_table__3Cw9e",filled:"Table_filled__wq5i1"}},16:function(t,e,c){t.exports={wrapper:"Col_wrapper__3FddR",selected:"Col_selected__29n3t"}},17:function(t,e,c){t.exports={wrapper:"AddRow_wrapper__3NW4Q",addButton:"AddRow_addButton__1hGob"}},18:function(t,e,c){t.exports={wrapper:"AddCol_wrapper__OkM3j",addButton:"AddCol_addButton__2VG6f"}},27:function(t,e,c){t.exports={wrapper:"TextEdit_wrapper__3ANjp"}},28:function(t,e,c){t.exports={wrapper:"RemoveRow_wrapper__QxJap"}},29:function(t,e,c){t.exports={techCol:"Row_techCol__HSNZB",active:"Row_active__1oG0c"}},30:function(t,e,c){t.exports={wrapper:"RemoveCol_wrapper__2M4QV"}},31:function(t,e,c){t.exports={techCol:"TechCol_techCol__3-ePx"}},57:function(t,e,c){"use strict";c.r(e);var n=c(2),o=c.n(n),a=c(26),r=c.n(a),s=c(5),d=c(3),l=n.createContext(null),i={touched:!1,selectionState:{selectedCols:[],selected:!1},rows:[{id:1,cols:[{content:"",type:"text",display:!0,id:1},{content:"",type:"text",display:!0,id:2}]}]},u=c(1),j=c(4),p=Object(j.createStandardAction)("TABLE/SET_START_SELECTION")(),b=Object(j.createStandardAction)("TABLE/SET_END_SELECTION")(),f=Object(j.createStandardAction)("TABLE/CLEAR_SELECTION")(),O=Object(j.createStandardAction)("TABLE/ROWS_UPDATE")(),w=Object(j.createStandardAction)("TABLE/UPDATE_COL_CONTENT")(),I=Object(j.createStandardAction)("TABLE/UPDATE_COL_BACKGROUND")(),h=Object(j.createStandardAction)("TABLE/SELECT_ROW")(),_=Object(j.createStandardAction)("TABLE/REMOVE_ROW")(),x=Object(j.createStandardAction)("TABLE/SELECT_COL")(),S=Object(j.createStandardAction)("TABLE/REMOVE_COL")(),C=function(t,e){return{row:{min:t.rowId<e.rowId?t.rowId:e.rowId,max:t.rowId<e.rowId?e.rowId:t.rowId},col:{min:t.colId<e.colId?t.colId:e.colId,max:t.colId<e.colId?e.colId:t.colId}}},v=function(t,e,c){var n=C(t,e);return c.rowId>=n.row.min&&c.rowId<=n.row.max&&c.colId>=n.col.min&&c.colId<=n.col.max},m=Object(j.createReducer)(i).handleAction(p,(function(t,e){var c=e.payload.positionStart;return Object(u.a)(Object(u.a)({},t),{},{touched:!0,selectionState:{selectedCols:[],selected:!1,start:c}})})).handleAction(b,(function(t,e){var c=e.payload,n=c.positionEnd,o=c.finished,a=[],r=t.rows;if(o&&t.selectionState.start)for(var s=t.selectionState.start.rowId;s<=n.rowId;s+=1)for(var d={rowId:s},l=t.selectionState.start.colId;l<=n.colId;l+=1){var i=r[s-1].cols[l-1].colSpan,j=r[s-1].cols[l-1].rowSpan;a.push(Object(u.a)(Object(u.a)(Object(u.a)({},d),{},{colId:l},j?{rowSpan:j}:{}),i?{colSpan:i}:{}))}return Object(u.a)(Object(u.a)(Object(u.a)({},t),o?{touched:!1}:{}),{},{selectionState:Object(u.a)(Object(u.a)(Object(u.a)({},t.selectionState),{},{selectedCols:a},o?{selected:!0}:{}),{},{end:n})})})).handleAction(f,(function(t){return Object(u.a)(Object(u.a)({},t),{},{selectionState:{selectedCols:[],selected:!1}})})).handleAction(O,(function(t,e){var c=e.payload.rows;return Object(u.a)(Object(u.a)({},t),{},{rows:c})})).handleAction(h,(function(t,e){var c=e.payload.rowId,n=t.rows[c-1],o=n.cols.map((function(t){return{rowId:c,colId:t.id}}));return Object(u.a)(Object(u.a)({},t),{},{selectionState:{selected:!0,selectedCols:o,start:{rowId:c,colId:n.cols[0].id},end:{rowId:c,colId:n.cols[n.cols.length-1].id}}})})).handleAction(x,(function(t,e){for(var c=e.payload.colId,n=[],o=1;o<=t.rows.length;o+=1)n.push({rowId:o,colId:c});return Object(u.a)(Object(u.a)({},t),{},{selectionState:{selected:!0,selectedCols:n,start:{rowId:t.rows[0].id,colId:c},end:{rowId:t.rows[t.rows.length-1].id,colId:c}}})})).handleAction(_,(function(t,e){var c=e.payload.rowId,n=t.rows;return n.splice(c-1,1),Object(u.a)(Object(u.a)({},t),{},{selectionState:{selectedCols:[],selected:!1},rows:n.map((function(t,e){return Object(u.a)(Object(u.a)({},t),{},{id:e+1})}))})})).handleAction(S,(function(t,e){var c=e.payload.colId,n=t.rows;return n.forEach((function(t){t.cols.splice(c-1,1),t.cols=t.cols.map((function(t,e){return Object(u.a)(Object(u.a)({},t),{},{id:e+1})}))})),Object(u.a)(Object(u.a)({},t),{},{selectionState:{selectedCols:[],selected:!1},rows:n.map((function(t,e){return Object(u.a)(Object(u.a)({},t),{},{id:e+1})}))})})).handleAction(w,(function(t,e){var c=e.payload,n=c.colId,o=c.rowId,a=c.content,r=t.rows;return r[o-1].cols[n-1].content=a,Object(u.a)(Object(u.a)({},t),{},{rows:r})})).handleAction(I,(function(t,e){var c=e.payload,n=c.selectionState,o=c.background,a=t.rows.map((function(t){var e=t.cols.map((function(e){return n.start&&n.end&&v(n.start,n.end,{rowId:t.id,colId:e.id})?Object(u.a)(Object(u.a)({},e),{},{background:o}):e}));return Object(u.a)(Object(u.a)({},t),{},{cols:e})}));return Object(u.a)(Object(u.a)({},t),{},{rows:a})})),g=c(7),E=c.n(g),A={content:"",type:"text",display:!0},B=["#fff1b8","#ffffb8","#f4ffb8","#d9f7be","#b5f5ec","#bae7ff","#d6e4ff","#efdbff","#ffccc7"],k=c(6),y=c.n(k),N=c(27),T=c.n(N),R=c(0),L=function(t){var e=t.value,c=t.colId,a=t.rowId,r=t.background,s=t.setEditMode,d=o.a.useContext(l).dispatch,i=Object(n.useRef)(null);o.a.useEffect((function(){i.current&&i.current.focus()}),[]);var u=function(t){d(w({rowId:a,colId:c,content:t.target.value})),s(!1)};return Object(R.jsx)("input",{ref:i,defaultValue:e,onBlur:u,onKeyDown:function(t){"Enter"===t.code&&u(t)},className:T.a.wrapper,style:{background:r}})},M=c(16),D=c.n(M),P=function(t){var e=t.colData,c=t.rowId,a=o.a.useState(!1),r=Object(d.a)(a,2),i=r[0],u=r[1],j=o.a.useState(!1),f=Object(d.a)(j,2),O=f[0],w=f[1],I=o.a.useContext(l),h=I.state,_=I.dispatch,x=Object(n.useRef)(null);if(o.a.useEffect((function(){h.selectionState.start&&h.selectionState.end?u(v(h.selectionState.start,h.selectionState.end,{rowId:c,colId:e.id})):u(!1)}),[h,c,e,x]),!e.display)return null;return Object(R.jsxs)("td",{id:"col-".concat(c,"-").concat(e.id),onMouseDown:function(){_(p({positionStart:{rowId:c,colId:e.id}}))},onMouseUp:function(){_(b({positionEnd:{rowId:e.rowSpan?c+e.rowSpan-1:c,colId:e.colSpan?e.id+e.colSpan-1:e.id},finished:!0}))},onMouseEnter:function(){h.touched&&_(b({positionEnd:{rowId:c,colId:e.id},finished:!1}))},onDoubleClick:function(){return w(!0)},colSpan:e.colSpan,rowSpan:e.rowSpan,className:y()(D.a.wrapper,Object(s.a)({},D.a.selected,i)),style:{background:e.background},children:[O&&"text"===e.type&&Object(R.jsx)(L,{value:e.content,background:e.background,rowId:c,colId:e.id,setEditMode:w}),!O&&e.content]})},V=function(t,e){var c=t[0]?t[0].cols.length:1,n={id:e+1,cols:Array(c).fill(A).map((function(t,e){return Object(u.a)(Object(u.a)({},t),{},{id:e+1})}))},o=t.map((function(t){return t.id>e?Object(u.a)(Object(u.a)({},t),{},{id:t.id+1}):t}));return o.splice(e,0,n),o},U=c(17),W=c.n(U),G=function(t){var e=t.rowId,c=o.a.useContext(l),n=c.dispatch,a=c.state;return Object(R.jsx)("div",{className:W.a.wrapper,children:Object(R.jsx)("button",{className:W.a.addButton,onClick:function(t){t.stopPropagation(),n(O({rows:V(a.rows,e)}))},children:"+"})})},J=c.p+"static/media/close-circle.50ed0904.svg",Q=c(28),Z=c.n(Q),q=function(t){var e=t.rowId,c=t.setRowSelected,n=o.a.useContext(l).dispatch;return Object(R.jsx)("button",{className:Z.a.wrapper,onClick:function(t){t.stopPropagation(),n(_({rowId:e})),c(!1)},children:Object(R.jsx)("img",{src:J,alt:""})})},F=c(29),K=c.n(F),H=function(t){var e=t.rowData,c=o.a.useState(!1),n=Object(d.a)(c,2),a=n[0],r=n[1],s=o.a.useContext(l),i=s.state,u=s.dispatch;return Object(R.jsxs)("tr",{style:{height:e.height||45},children:[Object(R.jsxs)("td",{className:K.a.techCol,onClick:function(){r(!0),u(h({rowId:e.id}))},children:[Object(R.jsx)(G,{rowId:e.id}),a&&i.rows.length>1&&Object(R.jsx)(E.a,{onOutsideClick:function(){r(!1)},children:Object(R.jsx)(q,{rowId:e.id,setRowSelected:r})})]}),e.cols.map((function(t){return Object(R.jsx)(P,{colData:t,rowId:e.id},t.id)}))]})},z=c(11),X=c.n(z),Y=function(t){var e,c=t.children,n=t.onClick,o=t.onBlur,a=t.className,r=t.style,d=t.active,l=void 0!==d&&d,i=t.disabled,u=void 0!==i&&i;return Object(R.jsx)("button",{disabled:u,onClick:n,onBlur:o,className:y()(X.a.wrapper,a,(e={},Object(s.a)(e,X.a.active,l),Object(s.a)(e,X.a.disabled,u),e)),style:r,children:c})},$=function(){var t=o.a.useState(0),e=Object(d.a)(t,2),c=e[0],n=e[1],a=o.a.useContext(l),r=a.state,s=a.dispatch;o.a.useEffect((function(){n(function(t){if(t.start&&t.end){var e=C(t.start,t.end);return(e.row.max-e.row.min+1)*(e.col.max-e.col.min+1)}return 0}(r.selectionState))}),[r]);return Object(R.jsx)("li",{children:Object(R.jsx)("button",{disabled:c<=1,onClick:function(){!function(t,e){var c=t.selectionState,n=t.rows;if(c.end&&c.start){var o=C(c.start,c.end),a={rowId:o.row.min,colId:o.col.min},r={prevColId:0,count:0},s={prevRowId:0,count:0};c.selectedCols.forEach((function(t,e){t.colId!==r.prevColId&&(r.prevColId=t.colId,r.count+=1,c.selectedCols.length===e-1&&t.colSpan&&(console.log("dfvsdf"),r.count+=t.colSpan)),t.rowId!==s.prevRowId&&(s.prevRowId=t.rowId,s.count+=1,c.selectedCols.length===e-1&&t.rowSpan&&(s.count+=t.rowSpan))}));var d=n.map((function(t){var e=t.cols.map((function(e){var n=a.rowId===t.id&&a.colId===e.id,o=v(c.start,c.end,{rowId:t.id,colId:e.id});return n&&r.count>1&&(e.colSpan=r.count),n&&s.count>1&&(e.rowSpan=s.count),Object(u.a)(Object(u.a)({},e),o&&!n?{display:!1}:{})}));return Object(u.a)(Object(u.a)({},t),{},{cols:e})}));e(O({rows:d})),e(f())}}(r,s)},children:"Merge"})})},tt=c(8),et=c.n(tt),ct=function(){var t=o.a.useContext(l),e=t.state,c=t.dispatch,n=function(t){c(I({selectionState:e.selectionState,background:t}))};return Object(R.jsxs)("li",{className:et.a.wrapper,children:[Object(R.jsx)("button",{children:"Background color"}),Object(R.jsxs)("div",{className:et.a.colors,children:[Object(R.jsx)("button",{onClick:function(){return n(void 0)},className:y()(et.a.colorButton,et.a.transparent)}),B.map((function(t){return Object(R.jsx)("button",{onClick:function(){return n(t)},style:{background:t},className:et.a.colorButton},t)}))]})]})},nt=c.p+"static/media/setting.5524b19c.svg",ot=c(9),at=c.n(ot),rt=function(){var t=o.a.useContext(l).state,e=o.a.useState(),c=Object(d.a)(e,2),n=c[0],a=c[1],r=o.a.useState(!1),i=Object(d.a)(r,2),u=i[0],j=i[1];return o.a.useEffect((function(){t.selectionState.start&&t.selectionState.end&&a(function(t,e){var c=C(t,e),n=document.getElementById("col-".concat(c.row.min,"-").concat(c.col.min));return n?{top:n.offsetTop+5,left:n.offsetLeft+5}:{top:0,left:0}}(t.selectionState.start,t.selectionState.end))}),[t]),Object(R.jsxs)("div",{className:y()(at.a.wrapper,Object(s.a)({},at.a.selected,t.selectionState.selected)),style:n,children:[Object(R.jsx)(Y,{onClick:function(){return j(!u)},className:at.a.settingButton,children:Object(R.jsx)("img",{src:nt,alt:""})}),u&&Object(R.jsx)(E.a,{onOutsideClick:function(){return j(!1)},children:Object(R.jsxs)("ul",{className:at.a.menu,children:[Object(R.jsx)(ct,{}),Object(R.jsx)($,{})]})})]})},st=function(t,e){return t.map((function(t){var c=t.cols.map((function(t){return t.id>e?Object(u.a)(Object(u.a)({},t),{},{id:t.id+1}):t})),n=Object(u.a)({id:e+1},A);return c.splice(e,0,n),Object(u.a)(Object(u.a)({},t),{},{cols:c})}))},dt=c(18),lt=c.n(dt),it=function(t){var e=t.colId,c=o.a.useContext(l),n=c.dispatch,a=c.state;return Object(R.jsx)("div",{className:lt.a.wrapper,children:Object(R.jsx)("button",{className:lt.a.addButton,onClick:function(t){t.stopPropagation(),n(O({rows:st(a.rows,e)}))},children:"+"})})},ut=c.p+"static/media/close-circle.50ed0904.svg",jt=c(30),pt=c.n(jt),bt=function(t){var e=t.colId,c=t.setColSelected,n=o.a.useContext(l).dispatch;return Object(R.jsx)("button",{className:pt.a.wrapper,onClick:function(t){t.stopPropagation(),n(S({colId:e})),c(!1)},children:Object(R.jsx)("img",{src:ut,alt:""})})},ft=c(31),Ot=c.n(ft),wt=function(t){var e=t.colId,c=o.a.useContext(l),n=c.state,a=c.dispatch,r=o.a.useState(!1),s=Object(d.a)(r,2),i=s[0],u=s[1];return Object(R.jsxs)("td",{onClick:function(){u(!0),a(x({colId:e}))},className:Ot.a.techCol,children:[Object(R.jsx)(it,{colId:e}),n.rows[0].cols.length>1&&i&&Object(R.jsx)(E.a,{onOutsideClick:function(){u(!1)},children:Object(R.jsx)(bt,{colId:e,setColSelected:u})})]},e)},It=function(){var t=o.a.useContext(l).state,e=o.a.useState([]),c=Object(d.a)(e,2),n=c[0],a=c[1];return o.a.useEffect((function(){a(Array(function(t){var e=0;return t.forEach((function(t){t.cols.length>e&&(e=t.cols.length)})),e}(t.rows)).fill({}).map((function(t,e){return Object(u.a)(Object(u.a)({},t),{},{id:e+1})})))}),[t]),t.rows.length?Object(R.jsxs)("tr",{children:[Object(R.jsx)("td",{style:{width:10}}),n.map((function(t){return Object(R.jsx)(wt,{colId:t.id},t.id)}))]}):null},ht=c(12),_t=c.n(ht),xt=function(t){var e=t.onChange,c=o.a.useReducer(m,i),n=Object(d.a)(c,2),a=n[0],r=n[1];return o.a.useEffect((function(){e&&"function"===typeof e&&e(a.rows),console.log(a)}),[a,e]),Object(R.jsx)(l.Provider,{value:{dispatch:r,state:a},children:Object(R.jsxs)("div",{className:_t.a.wrapper,children:[Object(R.jsx)("table",{className:y()(_t.a.table,Object(s.a)({},_t.a.filled,!!a.rows.length)),children:Object(R.jsxs)("tbody",{children:[Object(R.jsx)(It,{}),a.rows.map((function(t){return Object(R.jsx)(H,{rowData:t},t.id)}))]})}),Object(R.jsx)(rt,{})]})})};var St=function(){return Object(R.jsx)("div",{className:"App",children:Object(R.jsx)(xt,{})})};r.a.render(Object(R.jsx)(o.a.StrictMode,{children:Object(R.jsx)(St,{})}),document.getElementById("root"))},8:function(t,e,c){t.exports={wrapper:"ChangeBackground_wrapper__2Uwxj",colors:"ChangeBackground_colors__Je-TV",colorButton:"ChangeBackground_colorButton__2QEDl",transparent:"ChangeBackground_transparent__mqomV"}},9:function(t,e,c){t.exports={wrapper:"SelectionMenu_wrapper__2E3fb",selected:"SelectionMenu_selected__1dW4V",settingButton:"SelectionMenu_settingButton__2RZd1",menu:"SelectionMenu_menu__3_fZg"}}},[[57,1,2]]]);
//# sourceMappingURL=main.63abef54.chunk.js.map