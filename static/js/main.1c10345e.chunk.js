(this.webpackJsonptable=this.webpackJsonptable||[]).push([[0],{10:function(t,e,n){t.exports={wrapper:"Table_wrapper__2oJSk",table:"Table_table__3Cw9e"}},12:function(t,e,n){t.exports={wrapper:"SelectionMenu_wrapper__2E3fb"}},18:function(t,e,n){"use strict";n.r(e);var c=n(1),o=n.n(c),a=n(11),r=n.n(a),i=n(4),d=c.createContext(null),l={touched:!1,selectionState:{selected:!1},rows:[{id:1,height:60,cols:[{id:1,content:"11",type:"text"},{id:2,content:"12",type:"text"},{id:3,content:"13",type:"text"}]},{id:2,height:50,cols:[{id:1,content:"21",type:"text"},{id:2,content:"22",type:"text"},{id:3,content:"23",type:"text"}]},{id:3,height:70,cols:[{id:1,content:"31",type:"text"},{id:2,content:"32",type:"text"},{id:3,content:"33",type:"text"}]},{id:4,height:80,cols:[{id:1,content:"41",type:"text"},{id:2,content:"42",type:"text"},{id:3,content:"43",type:"text"}]}]},s=n(2),u=n(3),p=Object(u.createStandardAction)("TABLE/SET_START_SELECTION")(),b=Object(u.createStandardAction)("TABLE/SET_END_SELECTION")(),j=Object(u.createStandardAction)("TABLE/SET_SELECTED_SELECTION")(),w=Object(u.createStandardAction)("TABLE/SET_TOUCHED")(),O=Object(u.createStandardAction)("TABLE/CLEAR_SELECTION")(),f=Object(u.createStandardAction)("TABLE/ROWS_UPDATE")(),S=Object(u.createReducer)(l).handleAction(p,(function(t,e){var n=e.payload.positionStart;return Object(s.a)(Object(s.a)({},t),{},{selectionState:Object(s.a)(Object(s.a)({},t.selectionState),{},{start:n})})})).handleAction(b,(function(t,e){var n=e.payload.positionEnd;return Object(s.a)(Object(s.a)({},t),{},{selectionState:Object(s.a)(Object(s.a)({},t.selectionState),{},{end:n})})})).handleAction(w,(function(t,e){var n=e.payload.touched;return Object(s.a)(Object(s.a)({},t),{},{touched:n})})).handleAction(j,(function(t,e){var n=e.payload.selected;return Object(s.a)(Object(s.a)({},t),{},{selectionState:Object(s.a)(Object(s.a)({},t.selectionState),{},{selected:n})})})).handleAction(O,(function(t){return Object(s.a)(Object(s.a)({},t),{},{selectionState:{selected:!1}})})).handleAction(f,(function(t,e){var n=e.payload.rows;return Object(s.a)(Object(s.a)({},t),{},{rows:n})})),x=n(5),h=n(6),I=n.n(h),E=function(t,e){return{row:{min:t.rowId<e.rowId?t.rowId:e.rowId,max:t.rowId<e.rowId?e.rowId:t.rowId},col:{min:t.colId<e.colId?t.colId:e.colId,max:t.colId<e.colId?e.colId:t.colId}}},m=function(t,e,n){var c=E(t,e);return n.rowId>=c.row.min&&n.rowId<=c.row.max&&n.colId>=c.col.min&&n.colId<=c.col.max},_=n(9),v=n.n(_),y=n(0),A=function(t){var e=t.colData,n=t.rowId,c=o.a.useContext(d),a=c.state,r=c.dispatch,l=o.a.useState(!1),s=Object(i.a)(l,2),u=s[0],f=s[1];o.a.useEffect((function(){a.selectionState.start&&a.selectionState.end?f(m(a.selectionState.start,a.selectionState.end,{rowId:n,colId:e.id})):f(!1)}),[a,n,e]);return Object(y.jsx)("td",{id:"col-".concat(n,"-").concat(e.id),onMouseDown:function(){r(O()),r(w({touched:!0})),r(p({positionStart:{rowId:n,colId:e.id}}))},onMouseUp:function(){r(w({touched:!1})),r(j({selected:!0})),r(b({positionEnd:{rowId:n,colId:e.id}}))},onMouseEnter:function(){a.touched&&r(b({positionEnd:{rowId:n,colId:e.id}}))},colSpan:e.colSpan,rowSpan:e.rowSpan,className:I()(v.a.wrapper,Object(x.a)({},v.a.selected,u)),children:e.content})},T=function(t){var e=t.rowData;return Object(y.jsx)("tr",{style:{height:e.height},children:e.cols.map((function(t){return Object(y.jsx)(A,{colData:t,rowId:e.id},t.id)}))})},C=n(7),L=n.n(C),N=function(t){var e,n=t.children,c=t.onClick,o=t.className,a=t.style,r=t.active,i=void 0!==r&&r,d=t.disabled,l=void 0!==d&&d;return Object(y.jsx)("button",{disabled:l,onClick:c,className:I()(L.a.wrapper,o,(e={},Object(x.a)(e,L.a.active,i),Object(x.a)(e,L.a.disabled,l),e)),style:a,children:n})},B=function(){var t=o.a.useState(0),e=Object(i.a)(t,2),n=e[0],c=e[1],a=o.a.useContext(d),r=a.state,l=a.dispatch;if(o.a.useEffect((function(){c(function(t){if(t.start&&t.end){var e=E(t.start,t.end);return(e.row.max-e.row.min+1)*(e.col.max-e.col.min+1)}return 0}(r.selectionState))}),[r]),n<=1)return null;return Object(y.jsx)(N,{onClick:function(){!function(t,e){var n=t.selectionState,c=t.rows;if(n.end&&n.start){var o=E(n.start,n.end),a=o.col.max+1-o.col.min,r=o.row.max+1-o.row.min,i={row:o.row.min,col:o.col.min};console.log(i),a>1&&(c[i.row-1].cols[i.col-1].colSpan=a),r>1&&(c[i.row-1].cols[i.col-1].rowSpan=r),c.forEach((function(t){t.cols=t.cols.filter((function(e){return t.id===i.row&&e.id===i.col||!m(n.start,n.end,{rowId:t.id,colId:e.id})}))})),e(f({rows:c})),e(O())}}(r,l)},children:"Merge"})},g=n(12),D=n.n(g),M=function(){var t=o.a.useContext(d).state,e=o.a.useState(),n=Object(i.a)(e,2),c=n[0],a=n[1];return o.a.useEffect((function(){t.selectionState.start&&t.selectionState.end&&a(function(t,e){var n=E(t,e),c=document.getElementById("col-".concat(n.row.min,"-").concat(n.col.min));return c?{top:c.offsetTop+8,left:c.offsetLeft+8}:{top:0,left:0}}(t.selectionState.start,t.selectionState.end))}),[t]),t.selectionState.selected?Object(y.jsx)("div",{className:D.a.wrapper,style:c,children:Object(y.jsx)(B,{})}):null},k=n(10),R=n.n(k),J=function(){var t=o.a.useReducer(S,l),e=Object(i.a)(t,2),n=e[0],c=e[1];return Object(y.jsx)(d.Provider,{value:{dispatch:c,state:n},children:Object(y.jsxs)("div",{className:R.a.wrapper,children:[Object(y.jsx)("table",{className:R.a.table,children:Object(y.jsx)("tbody",{children:n.rows.map((function(t){return Object(y.jsx)(T,{rowData:t},t.id)}))})}),Object(y.jsx)(M,{})]})})};var U=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(J,{})})};r.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(U,{})}),document.getElementById("root"))},7:function(t,e,n){t.exports={wrapper:"Button_wrapper__pj90c",active:"Button_active__FWtIw",disabled:"Button_disabled__1AAMG"}},9:function(t,e,n){t.exports={wrapper:"Col_wrapper__3FddR",selected:"Col_selected__29n3t"}}},[[18,1,2]]]);
//# sourceMappingURL=main.1c10345e.chunk.js.map