(this.webpackJsonptable=this.webpackJsonptable||[]).push([[0],{10:function(e,t,o){e.exports={wrapper:"ChangeBackground_wrapper__2Uwxj",colors:"ChangeBackground_colors__Je-TV",colorButton:"ChangeBackground_colorButton__2QEDl",transparent:"ChangeBackground_transparent__mqomV"}},11:function(e,t,o){e.exports={wrapper:"SelectionMenu_wrapper__2E3fb",selected:"SelectionMenu_selected__1dW4V",settingButton:"SelectionMenu_settingButton__2RZd1",menu:"SelectionMenu_menu__3_fZg"}},15:function(e,t,o){e.exports={wrapper:"Button_wrapper__pj90c",active:"Button_active__FWtIw",disabled:"Button_disabled__1AAMG"}},16:function(e,t,o){e.exports={wrapper:"Table_wrapper__2oJSk",table:"Table_table__3Cw9e",filled:"Table_filled__wq5i1"}},21:function(e,t,o){e.exports={wrapper:"Col_wrapper__3FddR",selected:"Col_selected__29n3t"}},22:function(e,t,o){e.exports={wrapper:"AddRow_wrapper__3NW4Q",addButton:"AddRow_addButton__1hGob"}},23:function(e,t,o){e.exports={wrapper:"AddCol_wrapper__OkM3j",addButton:"AddCol_addButton__2VG6f"}},33:function(e,t,o){e.exports={wrapper:"TextEdit_wrapper__3ANjp"}},34:function(e,t,o){e.exports={wrapper:"RemoveRow_wrapper__QxJap"}},35:function(e,t,o){e.exports={techCol:"Row_techCol__HSNZB",active:"Row_active__1oG0c"}},38:function(e,t,o){e.exports={wrapper:"RemoveCol_wrapper__2M4QV"}},39:function(e,t,o){e.exports={techCol:"TechCol_techCol__3-ePx"}},64:function(e,t,o){"use strict";o.r(t);var c=o(2),r=o.n(c),n=o(32),a=o.n(n),s=o(6),d=o(4),l=c.createContext(null),i={touched:!1,selectionState:{selectedCols:[],selected:!1},rows:[{id:1,cols:[{content:"",type:"text",display:!0,id:1},{content:"",type:"text",display:!0,id:2}]}]},u=o(0),p=o(5),j=Object(p.createStandardAction)("TABLE/SET_START_SELECTION")(),b=Object(p.createStandardAction)("TABLE/SET_END_SELECTION")(),w=Object(p.createStandardAction)("TABLE/CLEAR_SELECTION")(),f=Object(p.createStandardAction)("TABLE/ROWS_UPDATE")(),O=Object(p.createStandardAction)("TABLE/UPDATE_COL_CONTENT")(),I=Object(p.createStandardAction)("TABLE/UPDATE_COL_BACKGROUND")(),h=Object(p.createStandardAction)("TABLE/SELECT_ROW")(),S=Object(p.createStandardAction)("TABLE/REMOVE_ROW")(),v=Object(p.createStandardAction)("TABLE/SELECT_COL")(),x=Object(p.createStandardAction)("TABLE/REMOVE_COL")(),_=function(e,t){return{row:{min:e.rowId<t.rowId?e.rowId:t.rowId,max:e.rowId<t.rowId?t.rowId:e.rowId},col:{min:e.colId<t.colId?e.colId:t.colId,max:e.colId<t.colId?t.colId:e.colId}}},C=function(e,t,o){var c=_(e,t);return o.rowId>=c.row.min&&o.rowId<=c.row.max&&o.colId>=c.col.min&&o.colId<=c.col.max},m=function(e){var t=e.selectedCols,o=e.start,c=e.end,r=t[0],n=(null===r||void 0===r?void 0:r.rowSpan)?r.rowSpan-1:0,a=(null===r||void 0===r?void 0:r.colSpan)?r.colSpan-1:0;return(n>0||a>0)&&!!o&&!!c&&c.rowId===o.rowId+n&&c.colId===o.colId+a&&t.length>1},E=Object(p.createReducer)(i).handleAction(j,(function(e,t){var o=t.payload.positionStart;return Object(u.a)(Object(u.a)({},e),{},{touched:!0,selectionState:{selectedCols:[],selected:!1,start:o}})})).handleAction(b,(function(e,t){var o=t.payload,c=o.positionEnd,r=o.finished,n=[],a=e.rows,s=e.selectionState.start;if(r&&s)for(var d=_(s,c),l={rowId:d.row.min,colId:d.col.min},i={rowId:d.row.max,colId:d.col.max},p=l.rowId;p<=i.rowId;p+=1)for(var j={rowId:p},b=l.colId;b<=i.colId;b+=1){var w=a[p-1].cols[b-1].colSpan,f=a[p-1].cols[b-1].rowSpan;n.push(Object(u.a)(Object(u.a)(Object(u.a)({},j),{},{colId:b},f?{rowSpan:f}:{}),w?{colSpan:w}:{}))}return Object(u.a)(Object(u.a)(Object(u.a)({},e),r?{touched:!1}:{}),{},{selectionState:Object(u.a)(Object(u.a)(Object(u.a)({},e.selectionState),{},{selectedCols:n},r?{selected:!0}:{}),{},{end:c})})})).handleAction(w,(function(e){return Object(u.a)(Object(u.a)({},e),{},{selectionState:{selectedCols:[],selected:!1}})})).handleAction(f,(function(e,t){var o=t.payload.rows;return Object(u.a)(Object(u.a)({},e),{},{rows:o})})).handleAction(h,(function(e,t){var o=t.payload.rowId,c=e.rows[o-1],r=c.cols.map((function(e){return{rowId:o,colId:e.id}}));return Object(u.a)(Object(u.a)({},e),{},{selectionState:{selected:!0,selectedCols:r,start:{rowId:o,colId:c.cols[0].id},end:{rowId:o,colId:c.cols[c.cols.length-1].id}}})})).handleAction(v,(function(e,t){for(var o=t.payload.colId,c=[],r=1;r<=e.rows.length;r+=1)c.push({rowId:r,colId:o});return Object(u.a)(Object(u.a)({},e),{},{selectionState:{selected:!0,selectedCols:c,start:{rowId:e.rows[0].id,colId:o},end:{rowId:e.rows[e.rows.length-1].id,colId:o}}})})).handleAction(S,(function(e,t){var o=t.payload.rowId,c=e.rows;return c.splice(o-1,1),Object(u.a)(Object(u.a)({},e),{},{selectionState:{selectedCols:[],selected:!1},rows:c.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{id:t+1})}))})})).handleAction(x,(function(e,t){var o=t.payload.colId,c=e.rows;return c.forEach((function(e){e.cols.splice(o-1,1),e.cols=e.cols.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{id:t+1})}))})),Object(u.a)(Object(u.a)({},e),{},{selectionState:{selectedCols:[],selected:!1},rows:c.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{id:t+1})}))})})).handleAction(O,(function(e,t){var o=t.payload,c=o.colId,r=o.rowId,n=o.content,a=e.rows;return a[r-1].cols[c-1].content=n,Object(u.a)(Object(u.a)({},e),{},{rows:a})})).handleAction(I,(function(e,t){var o=t.payload,c=o.selectionState,r=o.background,n=e.rows.map((function(e){var t=e.cols.map((function(t){return c.start&&c.end&&C(c.start,c.end,{rowId:e.id,colId:t.id})?Object(u.a)(Object(u.a)({},t),{},{background:r}):t}));return Object(u.a)(Object(u.a)({},e),{},{cols:t})}));return Object(u.a)(Object(u.a)({},e),{},{rows:n})})),g=o(9),A=o.n(g),F={content:"",type:"text",display:!0},B=["#fff1b8","#ffffb8","#f4ffb8","#d9f7be","#b5f5ec","#bae7ff","#d6e4ff","#efdbff","#ffccc7"],y=o(7),k=o.n(y),N=o(33),T=o.n(N),R=o(1),L=function(e){var t=e.value,o=e.colId,n=e.rowId,a=e.background,s=e.setEditMode,d=r.a.useContext(l).dispatch,i=Object(c.useRef)(null);r.a.useEffect((function(){i.current&&i.current.focus()}),[]);var u=function(e){d(O({rowId:n,colId:o,content:e.target.value})),s(!1)};return Object(R.jsx)("input",{ref:i,defaultValue:t,onBlur:u,onKeyDown:function(e){"Enter"===e.code&&u(e)},className:T.a.wrapper,style:{background:a}})},M=o(21),D=o.n(M),P=function(e){var t=e.colData,o=e.rowId,n=r.a.useState(!1),a=Object(d.a)(n,2),i=a[0],u=a[1],p=r.a.useState(!1),w=Object(d.a)(p,2),f=w[0],O=w[1],I=r.a.useContext(l),h=I.state,S=I.dispatch,v=Object(c.useRef)(null);if(r.a.useEffect((function(){h.selectionState.start&&h.selectionState.end?u(C(h.selectionState.start,h.selectionState.end,{rowId:o,colId:t.id})):u(!1)}),[h,o,t,v]),!t.display)return null;return Object(R.jsxs)("td",{id:"col-".concat(o,"-").concat(t.id),onMouseDown:function(){h.touched?S(b({positionEnd:{rowId:t.rowSpan?o+t.rowSpan-1:o,colId:t.colSpan?t.id+t.colSpan-1:t.id},finished:!0})):S(j({positionStart:{rowId:o,colId:t.id}}))},onMouseUp:function(){S(b({positionEnd:{rowId:t.rowSpan?o+t.rowSpan-1:o,colId:t.colSpan?t.id+t.colSpan-1:t.id},finished:!0}))},onMouseEnter:function(){h.touched&&S(b({positionEnd:{rowId:o,colId:t.id},finished:!1}))},onDoubleClick:function(){return O(!0)},colSpan:t.colSpan,rowSpan:t.rowSpan,className:k()(D.a.wrapper,Object(s.a)({},D.a.selected,i)),style:{background:t.background},children:[f&&"text"===t.type&&Object(R.jsx)(L,{value:t.content,background:t.background,rowId:o,colId:t.id,setEditMode:O}),!f&&t.content]})},V=function(e,t){var o=e[t-1],c=e[t],r={id:t+1,cols:[]};o.cols.forEach((function(n,a){var s=Object(u.a)(Object(u.a)({},F),{},{id:n.id});if(c){var d,l=o.cols[a],i=c.cols[a];if(l.rowSpan&&i.resourceFor&&i.resourceFor.colId===l.id&&i.resourceFor.rowId===o.id)null===(d=e[t-1].cols[a].resources)||void 0===d||d.push({rowId:t+2,colId:n.id}),r.cols.push(Object(u.a)(Object(u.a)({},s),{},{display:!1,resourceFor:{rowId:t,colId:n.id}}));else if(l.resourceFor&&i.resourceFor&&i.resourceFor.colId===l.resourceFor.colId&&i.resourceFor.rowId===l.resourceFor.rowId){var p;null===(p=e[l.resourceFor.rowId-1].cols[l.resourceFor.colId-1].resources)||void 0===p||p.push({rowId:t+2,colId:n.id}),r.cols.push(Object(u.a)(Object(u.a)({},s),{},{display:!1,resourceFor:l.resourceFor}))}else r.cols.push(s)}else r.cols.push(s)}));var n=[];r.cols.forEach((function(t){if(t.resourceFor){var o="".concat(t.resourceFor.rowId).concat(t.resourceFor.colId);if(!n.includes(o)){var c=e[t.resourceFor.rowId-1].cols[t.resourceFor.colId-1].rowSpan||0;e[t.resourceFor.rowId-1].cols[t.resourceFor.colId-1].rowSpan=c+1,n.push(o)}}}));var a=e.map((function(e){if(e.id>t){var o=e.cols.map((function(e){return Object(u.a)(Object(u.a)(Object(u.a)({},e),e.resources?{resources:e.resources.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{rowId:e.rowId+1})}))}:{}),e.resourceFor&&e.resourceFor.rowId>t?{resourceFor:Object(u.a)(Object(u.a)({},e.resourceFor),{},{rowId:e.resourceFor.rowId+1})}:e.resourceFor)}));return Object(u.a)(Object(u.a)({},e),{},{id:e.id+1,cols:o})}return e}));return a.splice(t,0,r),a},U=o(22),W=o.n(U),G=function(e){var t=e.rowId,o=r.a.useContext(l),c=o.dispatch,n=o.state;return Object(R.jsx)("div",{className:W.a.wrapper,children:Object(R.jsx)("button",{className:W.a.addButton,onClick:function(e){e.stopPropagation(),c(f({rows:V(n.rows,t)}))},children:"+"})})},J=o.p+"static/media/close-circle.50ed0904.svg",Q=o(34),Z=o.n(Q),q=function(e){var t=e.rowId,o=e.setRowSelected,c=r.a.useContext(l).dispatch;return Object(R.jsx)("button",{className:Z.a.wrapper,onClick:function(e){e.stopPropagation(),c(S({rowId:t})),o(!1)},children:Object(R.jsx)("img",{src:J,alt:""})})},K=o(35),H=o.n(K),z=function(e){var t=e.rowData,o=r.a.useState(!1),c=Object(d.a)(o,2),n=c[0],a=c[1],s=r.a.useContext(l),i=s.state,u=s.dispatch;return Object(R.jsxs)("tr",{style:{height:t.height||45},children:[Object(R.jsxs)("td",{className:H.a.techCol,onClick:function(){a(!0),u(h({rowId:t.id}))},children:[Object(R.jsx)(G,{rowId:t.id}),n&&i.rows.length>1&&Object(R.jsx)(A.a,{onOutsideClick:function(){a(!1)},children:Object(R.jsx)(q,{rowId:t.id,setRowSelected:a})})]}),t.cols.map((function(e){return Object(R.jsx)(P,{colData:e,rowId:t.id},e.id)}))]})},X=o(15),Y=o.n(X),$=function(e){var t,o=e.children,c=e.onClick,r=e.onBlur,n=e.className,a=e.style,d=e.active,l=void 0!==d&&d,i=e.disabled,u=void 0!==i&&i;return Object(R.jsx)("button",{disabled:u,onClick:c,onBlur:r,className:k()(Y.a.wrapper,n,(t={},Object(s.a)(t,Y.a.active,l),Object(s.a)(t,Y.a.disabled,u),t)),style:a,children:o})},ee=function(){var e=r.a.useContext(l),t=e.state,o=e.dispatch;return Object(R.jsx)("li",{children:Object(R.jsx)("button",{disabled:m(t.selectionState)||!(t.selectionState.selectedCols.length>1),onClick:function(){!function(e,t){var o=e.selectionState,c=e.rows,r=[],n=o.selectedCols,a={rowId:n[0].rowId,colId:n[0].colId},s={prevRowId:n[0].rowId,prevColId:0,count:0},d={prevRowId:0,count:0};n.forEach((function(e,t){e.colId!==s.prevColId&&e.rowId===s.prevRowId&&(s.prevColId=e.colId,s.count+=1,n.length===t-1&&e.colSpan&&(s.count+=e.colSpan)),e.rowId!==d.prevRowId&&(d.prevRowId=e.rowId,d.count+=1,o.selectedCols.length===t-1&&e.rowSpan&&(d.count+=e.rowSpan))}));var l=c.map((function(e){var t=e.cols.map((function(t){var c={rowId:e.id,colId:t.id},n=a.rowId===e.id&&a.colId===t.id,l=C(o.start,o.end,c);return n&&s.count>1&&(t.colSpan=s.count),n&&d.count>1&&(t.rowSpan=d.count),l&&!n&&r.push(c),Object(u.a)(Object(u.a)(Object(u.a)({},t),n?{resources:[]}:{}),l&&!n?{display:!1,resourceFor:a}:{})}));return Object(u.a)(Object(u.a)({},e),{},{cols:t})}));l[a.rowId-1].cols[a.colId-1].resources=r,t(f({rows:l})),t(w())}(t,o)},children:"Merge"})})},te=o(66),oe=function(){var e=r.a.useContext(l),t=e.state,o=e.dispatch;return Object(R.jsx)("li",{children:Object(R.jsx)("button",{disabled:!m(t.selectionState),onClick:function(){!function(e,t){var o=e.selectionState,c=e.rows,r=o.selectedCols[0],n=c[r.rowId-1].cols[r.colId-1];n&&n.resources&&n.resources.forEach((function(e){var t=c[e.rowId-1].cols[e.colId-1];c[e.rowId-1].cols[e.colId-1]=Object(u.a)(Object(u.a)({},Object(te.a)(t,["resourceFor"])),{},{display:!0})})),c[r.rowId-1].cols[r.colId-1]=Object(te.a)(n,["resources","colSpan","rowSpan"]),t(f({rows:c})),t(w())}(t,o)},children:"Unmerge"})})},ce=o(10),re=o.n(ce),ne=function(){var e=r.a.useContext(l),t=e.state,o=e.dispatch,c=function(e){o(I({selectionState:t.selectionState,background:e}))};return Object(R.jsxs)("li",{className:re.a.wrapper,children:[Object(R.jsx)("button",{children:"Background color"}),Object(R.jsxs)("div",{className:re.a.colors,children:[Object(R.jsx)("button",{onClick:function(){return c(void 0)},className:k()(re.a.colorButton,re.a.transparent)}),B.map((function(e){return Object(R.jsx)("button",{onClick:function(){return c(e)},style:{background:e},className:re.a.colorButton},e)}))]})]})},ae=o.p+"static/media/setting.5524b19c.svg",se=o(11),de=o.n(se),le=function(){var e=r.a.useContext(l).state,t=r.a.useState(),o=Object(d.a)(t,2),c=o[0],n=o[1],a=r.a.useState(!1),i=Object(d.a)(a,2),u=i[0],p=i[1];return r.a.useEffect((function(){e.selectionState.start&&e.selectionState.end&&n(function(e,t){var o=_(e,t),c=document.getElementById("col-".concat(o.row.min,"-").concat(o.col.min));return c?{top:c.offsetTop+5,left:c.offsetLeft+5}:{top:0,left:0}}(e.selectionState.start,e.selectionState.end))}),[e]),Object(R.jsxs)("div",{className:k()(de.a.wrapper,Object(s.a)({},de.a.selected,e.selectionState.selected)),style:c,children:[Object(R.jsx)($,{onClick:function(){return p(!u)},className:de.a.settingButton,children:Object(R.jsx)("img",{src:ae,alt:""})}),u&&Object(R.jsx)(A.a,{onOutsideClick:function(){return p(!1)},children:Object(R.jsxs)("ul",{className:de.a.menu,children:[Object(R.jsx)(ne,{}),Object(R.jsx)(ee,{}),Object(R.jsx)(oe,{})]})})]})},ie=function(e,t){return e.map((function(e){var o,c,r,n=e.cols.map((function(e){return e.id>t?Object(u.a)(Object(u.a)(Object(u.a)({},e),{},{id:e.id+1},e.resources?{resources:e.resources.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{colId:e.colId+1})}))}:{}),e.resourceFor&&e.resourceFor.colId>t?{resourceFor:Object(u.a)(Object(u.a)({},e.resourceFor),{},{colId:e.resourceFor.colId+1})}:e.resourceFor):e})),a=n[t-1]&&n[t-1].resourceFor&&n[t]&&n[t].resourceFor&&(null===(o=n[t-1].resourceFor)||void 0===o?void 0:o.colId)===(null===(c=n[t].resourceFor)||void 0===c?void 0:c.colId),s=Object(u.a)(Object(u.a)(Object(u.a)({id:t+1},F),n[t-1]&&n[t-1].colSpan?{display:!1,resourceFor:{rowId:e.id,colId:n[t-1].id}}:{}),a?{display:!1,resourceFor:n[t-1].resourceFor}:{});n[t-1]&&n[t-1].colSpan&&(n[t-1].colSpan+=1,null===(r=n[t-1].resources)||void 0===r||r.push({rowId:e.id,colId:s.id}));if(a){var d=n[t-1].resourceFor;d&&n[d.colId-1]&&(n[d.colId-1].colSpan+=1)}return n.splice(t,0,s),Object(u.a)(Object(u.a)({},e),{},{cols:n})}))},ue=o(23),pe=o.n(ue),je=function(e){var t=e.colId,o=r.a.useContext(l),c=o.dispatch,n=o.state;return Object(R.jsx)("div",{className:pe.a.wrapper,children:Object(R.jsx)("button",{className:pe.a.addButton,onClick:function(e){e.stopPropagation(),c(f({rows:ie(n.rows,t)}))},children:"+"})})},be=o.p+"static/media/close-circle.50ed0904.svg",we=o(38),fe=o.n(we),Oe=function(e){var t=e.colId,o=e.setColSelected,c=r.a.useContext(l).dispatch;return Object(R.jsx)("button",{className:fe.a.wrapper,onClick:function(e){e.stopPropagation(),c(x({colId:t})),o(!1)},children:Object(R.jsx)("img",{src:be,alt:""})})},Ie=o(39),he=o.n(Ie),Se=function(e){var t=e.colId,o=r.a.useContext(l),c=o.state,n=o.dispatch,a=r.a.useState(!1),s=Object(d.a)(a,2),i=s[0],u=s[1];return Object(R.jsxs)("td",{onClick:function(){u(!0),n(v({colId:t}))},className:he.a.techCol,children:[Object(R.jsx)(je,{colId:t}),c.rows[0].cols.length>1&&i&&Object(R.jsx)(A.a,{onOutsideClick:function(){u(!1)},children:Object(R.jsx)(Oe,{colId:t,setColSelected:u})})]},t)},ve=function(){var e=r.a.useContext(l).state,t=r.a.useState([]),o=Object(d.a)(t,2),c=o[0],n=o[1];return r.a.useEffect((function(){n(Array(function(e){var t=0;return e.forEach((function(e){e.cols.length>t&&(t=e.cols.length)})),t}(e.rows)).fill({}).map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{id:t+1})})))}),[e]),e.rows.length?Object(R.jsxs)("tr",{children:[Object(R.jsx)("td",{style:{width:10}}),c.map((function(e){return Object(R.jsx)(Se,{colId:e.id},e.id)}))]}):null},xe=o(16),_e=o.n(xe),Ce=function(e){var t=e.onChange,o=r.a.useReducer(E,i),c=Object(d.a)(o,2),n=c[0],a=c[1];return r.a.useEffect((function(){t&&"function"===typeof t&&t(n.rows)}),[n,t]),Object(R.jsx)(l.Provider,{value:{dispatch:a,state:n},children:Object(R.jsxs)("div",{className:_e.a.wrapper,children:[Object(R.jsx)("table",{className:k()(_e.a.table,Object(s.a)({},_e.a.filled,!!n.rows.length)),children:Object(R.jsxs)("tbody",{children:[Object(R.jsx)(ve,{}),n.rows.map((function(e){return Object(R.jsx)(z,{rowData:e},e.id)}))]})}),Object(R.jsx)(le,{})]})})};var me=function(){return Object(R.jsx)("div",{className:"App",children:Object(R.jsx)(Ce,{})})};a.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(me,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.cf303761.chunk.js.map