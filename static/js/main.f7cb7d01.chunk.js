(this.webpackJsonptable=this.webpackJsonptable||[]).push([[0],{11:function(e,t,c){e.exports={wrapper:"Button_wrapper__pj90c",active:"Button_active__FWtIw",disabled:"Button_disabled__1AAMG"}},12:function(e,t,c){e.exports={wrapper:"Table_wrapper__2oJSk",table:"Table_table__3Cw9e",filled:"Table_filled__wq5i1"}},16:function(e,t,c){e.exports={wrapper:"Col_wrapper__3FddR",selected:"Col_selected__29n3t"}},17:function(e,t,c){e.exports={wrapper:"AddRow_wrapper__3NW4Q",addButton:"AddRow_addButton__1hGob"}},18:function(e,t,c){e.exports={wrapper:"AddCol_wrapper__OkM3j",addButton:"AddCol_addButton__2VG6f"}},27:function(e,t,c){e.exports={wrapper:"TextEdit_wrapper__3ANjp"}},28:function(e,t,c){e.exports={wrapper:"RemoveRow_wrapper__QxJap"}},29:function(e,t,c){e.exports={techCol:"Row_techCol__HSNZB",active:"Row_active__1oG0c"}},30:function(e,t,c){e.exports={wrapper:"RemoveCol_wrapper__2M4QV"}},31:function(e,t,c){e.exports={techCol:"TechCol_techCol__3-ePx"}},57:function(e,t,c){"use strict";c.r(t);var o=c(2),n=c.n(o),r=c(26),a=c.n(r),s=c(5),d=c(3),l=o.createContext(null),i={touched:!1,selectionState:{selectedCols:[],selected:!1},rows:[{id:1,cols:[{content:"",type:"text",display:!0,id:1},{content:"",type:"text",display:!0,id:2}]}]},u=c(1),p=c(4),j=Object(p.createStandardAction)("TABLE/SET_START_SELECTION")(),b=Object(p.createStandardAction)("TABLE/SET_END_SELECTION")(),f=Object(p.createStandardAction)("TABLE/CLEAR_SELECTION")(),w=Object(p.createStandardAction)("TABLE/ROWS_UPDATE")(),O=Object(p.createStandardAction)("TABLE/UPDATE_COL_CONTENT")(),I=Object(p.createStandardAction)("TABLE/UPDATE_COL_BACKGROUND")(),h=Object(p.createStandardAction)("TABLE/SELECT_ROW")(),S=Object(p.createStandardAction)("TABLE/REMOVE_ROW")(),_=Object(p.createStandardAction)("TABLE/SELECT_COL")(),x=Object(p.createStandardAction)("TABLE/REMOVE_COL")(),v=function(e,t){return{row:{min:e.rowId<t.rowId?e.rowId:t.rowId,max:e.rowId<t.rowId?t.rowId:e.rowId},col:{min:e.colId<t.colId?e.colId:t.colId,max:e.colId<t.colId?t.colId:e.colId}}},C=function(e,t,c){var o=v(e,t);return c.rowId>=o.row.min&&c.rowId<=o.row.max&&c.colId>=o.col.min&&c.colId<=o.col.max},m=Object(p.createReducer)(i).handleAction(j,(function(e,t){var c=t.payload.positionStart;return Object(u.a)(Object(u.a)({},e),{},{touched:!0,selectionState:{selectedCols:[],selected:!1,start:c}})})).handleAction(b,(function(e,t){var c=t.payload,o=c.positionEnd,n=c.finished,r=[],a=e.rows;if(n&&e.selectionState.start)for(var s=e.selectionState.start.rowId;s<=o.rowId;s+=1)for(var d={rowId:s},l=e.selectionState.start.colId;l<=o.colId;l+=1){var i=a[s-1].cols[l-1].colSpan,p=a[s-1].cols[l-1].rowSpan;r.push(Object(u.a)(Object(u.a)(Object(u.a)({},d),{},{colId:l},p?{rowSpan:p}:{}),i?{colSpan:i}:{}))}return Object(u.a)(Object(u.a)(Object(u.a)({},e),n?{touched:!1}:{}),{},{selectionState:Object(u.a)(Object(u.a)(Object(u.a)({},e.selectionState),{},{selectedCols:r},n?{selected:!0}:{}),{},{end:o})})})).handleAction(f,(function(e){return Object(u.a)(Object(u.a)({},e),{},{selectionState:{selectedCols:[],selected:!1}})})).handleAction(w,(function(e,t){var c=t.payload.rows;return Object(u.a)(Object(u.a)({},e),{},{rows:c})})).handleAction(h,(function(e,t){var c=t.payload.rowId,o=e.rows[c-1],n=o.cols.map((function(e){return{rowId:c,colId:e.id}}));return Object(u.a)(Object(u.a)({},e),{},{selectionState:{selected:!0,selectedCols:n,start:{rowId:c,colId:o.cols[0].id},end:{rowId:c,colId:o.cols[o.cols.length-1].id}}})})).handleAction(_,(function(e,t){for(var c=t.payload.colId,o=[],n=1;n<=e.rows.length;n+=1)o.push({rowId:n,colId:c});return Object(u.a)(Object(u.a)({},e),{},{selectionState:{selected:!0,selectedCols:o,start:{rowId:e.rows[0].id,colId:c},end:{rowId:e.rows[e.rows.length-1].id,colId:c}}})})).handleAction(S,(function(e,t){var c=t.payload.rowId,o=e.rows;return o.splice(c-1,1),Object(u.a)(Object(u.a)({},e),{},{selectionState:{selectedCols:[],selected:!1},rows:o.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{id:t+1})}))})})).handleAction(x,(function(e,t){var c=t.payload.colId,o=e.rows;return o.forEach((function(e){e.cols.splice(c-1,1),e.cols=e.cols.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{id:t+1})}))})),Object(u.a)(Object(u.a)({},e),{},{selectionState:{selectedCols:[],selected:!1},rows:o.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{id:t+1})}))})})).handleAction(O,(function(e,t){var c=t.payload,o=c.colId,n=c.rowId,r=c.content,a=e.rows;return a[n-1].cols[o-1].content=r,Object(u.a)(Object(u.a)({},e),{},{rows:a})})).handleAction(I,(function(e,t){var c=t.payload,o=c.selectionState,n=c.background,r=e.rows.map((function(e){var t=e.cols.map((function(t){return o.start&&o.end&&C(o.start,o.end,{rowId:e.id,colId:t.id})?Object(u.a)(Object(u.a)({},t),{},{background:n}):t}));return Object(u.a)(Object(u.a)({},e),{},{cols:t})}));return Object(u.a)(Object(u.a)({},e),{},{rows:r})})),g=c(7),E=c.n(g),A={content:"",type:"text",display:!0},B=["#fff1b8","#ffffb8","#f4ffb8","#d9f7be","#b5f5ec","#bae7ff","#d6e4ff","#efdbff","#ffccc7"],y=c(6),k=c.n(y),N=c(27),T=c.n(N),R=c(0),F=function(e){var t=e.value,c=e.colId,r=e.rowId,a=e.background,s=e.setEditMode,d=n.a.useContext(l).dispatch,i=Object(o.useRef)(null);n.a.useEffect((function(){i.current&&i.current.focus()}),[]);var u=function(e){d(O({rowId:r,colId:c,content:e.target.value})),s(!1)};return Object(R.jsx)("input",{ref:i,defaultValue:t,onBlur:u,onKeyDown:function(e){"Enter"===e.code&&u(e)},className:T.a.wrapper,style:{background:a}})},L=c(16),M=c.n(L),D=function(e){var t=e.colData,c=e.rowId,r=n.a.useState(!1),a=Object(d.a)(r,2),i=a[0],u=a[1],p=n.a.useState(!1),f=Object(d.a)(p,2),w=f[0],O=f[1],I=n.a.useContext(l),h=I.state,S=I.dispatch,_=Object(o.useRef)(null);if(n.a.useEffect((function(){h.selectionState.start&&h.selectionState.end?u(C(h.selectionState.start,h.selectionState.end,{rowId:c,colId:t.id})):u(!1)}),[h,c,t,_]),!t.display)return null;return Object(R.jsxs)("td",{id:"col-".concat(c,"-").concat(t.id),onMouseDown:function(){S(j({positionStart:{rowId:c,colId:t.id}}))},onMouseUp:function(){S(b({positionEnd:{rowId:t.rowSpan?c+t.rowSpan-1:c,colId:t.colSpan?t.id+t.colSpan-1:t.id},finished:!0}))},onMouseEnter:function(){h.touched&&S(b({positionEnd:{rowId:c,colId:t.id},finished:!1}))},onDoubleClick:function(){return O(!0)},colSpan:t.colSpan,rowSpan:t.rowSpan,className:k()(M.a.wrapper,Object(s.a)({},M.a.selected,i)),style:{background:t.background},children:[w&&"text"===t.type&&Object(R.jsx)(F,{value:t.content,background:t.background,rowId:c,colId:t.id,setEditMode:O}),!w&&t.content]})},P=function(e,t){var c=e[t-1],o=[],n={id:t+1,cols:[]};c.cols.forEach((function(r,a){if(r.rowSpan){var s="".concat(c.id).concat(r.id);o.includes(s)||(e[t-1].cols[a].rowSpan=r.rowSpan+1,o.push(s)),n.cols.push(Object(u.a)(Object(u.a)({},A),{},{id:r.id,display:!1,resourceFor:{rowId:t,colId:r.id}},r.colSpan?{colSpan:r.colSpan}:{}))}else if(r.resourceFor){if(n.cols.push(Object(u.a)(Object(u.a)({},A),{},{id:r.id,resourceFor:r.resourceFor,display:!1},r.colSpan?{colSpan:r.colSpan}:{})),r.resourceFor.rowId!==c.id){var d="".concat(r.resourceFor.rowId).concat(r.resourceFor.colId);o.includes(d)||(e[r.resourceFor.rowId-1].cols[r.resourceFor.colId-1].rowSpan+=1,o.push(d))}}else n.cols.push(Object(u.a)(Object(u.a)({},A),{},{id:r.id},r.colSpan?{colSpan:r.colSpan}:{}))}));var r=e.map((function(e){return e.id>t?Object(u.a)(Object(u.a)({},e),{},{id:e.id+1}):e}));return r.splice(t,0,n),r},V=c(17),U=c.n(V),W=function(e){var t=e.rowId,c=n.a.useContext(l),o=c.dispatch,r=c.state;return Object(R.jsx)("div",{className:U.a.wrapper,children:Object(R.jsx)("button",{className:U.a.addButton,onClick:function(e){e.stopPropagation(),o(w({rows:P(r.rows,t)}))},children:"+"})})},G=c.p+"static/media/close-circle.50ed0904.svg",J=c(28),Q=c.n(J),Z=function(e){var t=e.rowId,c=e.setRowSelected,o=n.a.useContext(l).dispatch;return Object(R.jsx)("button",{className:Q.a.wrapper,onClick:function(e){e.stopPropagation(),o(S({rowId:t})),c(!1)},children:Object(R.jsx)("img",{src:G,alt:""})})},q=c(29),K=c.n(q),H=function(e){var t=e.rowData,c=n.a.useState(!1),o=Object(d.a)(c,2),r=o[0],a=o[1],s=n.a.useContext(l),i=s.state,u=s.dispatch;return Object(R.jsxs)("tr",{style:{height:t.height||45},children:[Object(R.jsxs)("td",{className:K.a.techCol,onClick:function(){a(!0),u(h({rowId:t.id}))},children:[Object(R.jsx)(W,{rowId:t.id}),r&&i.rows.length>1&&Object(R.jsx)(E.a,{onOutsideClick:function(){a(!1)},children:Object(R.jsx)(Z,{rowId:t.id,setRowSelected:a})})]}),t.cols.map((function(e){return Object(R.jsx)(D,{colData:e,rowId:t.id},e.id)}))]})},z=c(11),X=c.n(z),Y=function(e){var t,c=e.children,o=e.onClick,n=e.onBlur,r=e.className,a=e.style,d=e.active,l=void 0!==d&&d,i=e.disabled,u=void 0!==i&&i;return Object(R.jsx)("button",{disabled:u,onClick:o,onBlur:n,className:k()(X.a.wrapper,r,(t={},Object(s.a)(t,X.a.active,l),Object(s.a)(t,X.a.disabled,u),t)),style:a,children:c})},$=function(){var e=n.a.useState(0),t=Object(d.a)(e,2),c=t[0],o=t[1],r=n.a.useContext(l),a=r.state,s=r.dispatch;n.a.useEffect((function(){o(function(e){if(e.start&&e.end){var t=v(e.start,e.end);return(t.row.max-t.row.min+1)*(t.col.max-t.col.min+1)}return 0}(a.selectionState))}),[a]);return Object(R.jsx)("li",{children:Object(R.jsx)("button",{disabled:c<=1,onClick:function(){!function(e,t){var c=e.selectionState,o=e.rows,n=[],r=c.selectedCols,a={rowId:r[0].rowId,colId:r[0].colId},s={prevRowId:r[0].rowId,prevColId:0,count:0},d={prevRowId:0,count:0};r.forEach((function(e,t){e.colId!==s.prevColId&&e.rowId===s.prevRowId&&(s.prevColId=e.colId,s.count+=1,r.length===t-1&&e.colSpan&&(s.count+=e.colSpan)),e.rowId!==d.prevRowId&&(d.prevRowId=e.rowId,d.count+=1,c.selectedCols.length===t-1&&e.rowSpan&&(d.count+=e.rowSpan))}));var l=o.map((function(e){var t=e.cols.map((function(t){var o={rowId:e.id,colId:t.id},r=a.rowId===e.id&&a.colId===t.id,l=C(c.start,c.end,o);return r&&s.count>1&&(t.colSpan=s.count),r&&d.count>1&&(t.rowSpan=d.count),l&&!r&&n.push(o),Object(u.a)(Object(u.a)(Object(u.a)({},t),r?{resources:[]}:{}),l&&!r?{display:!1,resourceFor:a}:{})}));return Object(u.a)(Object(u.a)({},e),{},{cols:t})}));l[a.rowId-1].cols[a.colId-1].resources=n,t(w({rows:l})),t(f())}(a,s)},children:"Merge"})})},ee=c(8),te=c.n(ee),ce=function(){var e=n.a.useContext(l),t=e.state,c=e.dispatch,o=function(e){c(I({selectionState:t.selectionState,background:e}))};return Object(R.jsxs)("li",{className:te.a.wrapper,children:[Object(R.jsx)("button",{children:"Background color"}),Object(R.jsxs)("div",{className:te.a.colors,children:[Object(R.jsx)("button",{onClick:function(){return o(void 0)},className:k()(te.a.colorButton,te.a.transparent)}),B.map((function(e){return Object(R.jsx)("button",{onClick:function(){return o(e)},style:{background:e},className:te.a.colorButton},e)}))]})]})},oe=c.p+"static/media/setting.5524b19c.svg",ne=c(9),re=c.n(ne),ae=function(){var e=n.a.useContext(l).state,t=n.a.useState(),c=Object(d.a)(t,2),o=c[0],r=c[1],a=n.a.useState(!1),i=Object(d.a)(a,2),u=i[0],p=i[1];return n.a.useEffect((function(){e.selectionState.start&&e.selectionState.end&&r(function(e,t){var c=v(e,t),o=document.getElementById("col-".concat(c.row.min,"-").concat(c.col.min));return o?{top:o.offsetTop+5,left:o.offsetLeft+5}:{top:0,left:0}}(e.selectionState.start,e.selectionState.end))}),[e]),Object(R.jsxs)("div",{className:k()(re.a.wrapper,Object(s.a)({},re.a.selected,e.selectionState.selected)),style:o,children:[Object(R.jsx)(Y,{onClick:function(){return p(!u)},className:re.a.settingButton,children:Object(R.jsx)("img",{src:oe,alt:""})}),u&&Object(R.jsx)(E.a,{onOutsideClick:function(){return p(!1)},children:Object(R.jsxs)("ul",{className:re.a.menu,children:[Object(R.jsx)(ce,{}),Object(R.jsx)($,{})]})})]})},se=function(e,t){return e.map((function(e){var c,o=e.cols.map((function(e){if(e.id>t){var c=[];return e.resources&&(c=e.resources.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{colId:e.colId+1})}))),e.resourceFor&&e.resourceFor.colId>t&&(e.resourceFor.colId+=1),Object(u.a)(Object(u.a)({},e),{},{id:e.id+1},c.length?{resources:c}:{})}return e})),n=Object(u.a)(Object(u.a)(Object(u.a)({id:t+1},A),o[t-1].colSpan?{display:!1,resourceFor:{rowId:e.id,colId:o[t-1].id}}:{}),o[t-1]&&o[t-1].resourceFor&&o[t]&&o[t].resourceFor?{display:!1,resourceFor:o[t-1].resourceFor}:{});o[t-1].colSpan&&(o[t-1].colSpan+=1,null===(c=o[t-1].resources)||void 0===c||c.push({rowId:e.id,colId:n.id}));o[t-1]&&o[t-1].resourceFor&&o[t]&&o[t].resourceFor&&(o[o[t-1].resourceFor.colId-1].colSpan+=1);return o.splice(t,0,n),Object(u.a)(Object(u.a)({},e),{},{cols:o})}))},de=c(18),le=c.n(de),ie=function(e){var t=e.colId,c=n.a.useContext(l),o=c.dispatch,r=c.state;return Object(R.jsx)("div",{className:le.a.wrapper,children:Object(R.jsx)("button",{className:le.a.addButton,onClick:function(e){e.stopPropagation(),o(w({rows:se(r.rows,t)}))},children:"+"})})},ue=c.p+"static/media/close-circle.50ed0904.svg",pe=c(30),je=c.n(pe),be=function(e){var t=e.colId,c=e.setColSelected,o=n.a.useContext(l).dispatch;return Object(R.jsx)("button",{className:je.a.wrapper,onClick:function(e){e.stopPropagation(),o(x({colId:t})),c(!1)},children:Object(R.jsx)("img",{src:ue,alt:""})})},fe=c(31),we=c.n(fe),Oe=function(e){var t=e.colId,c=n.a.useContext(l),o=c.state,r=c.dispatch,a=n.a.useState(!1),s=Object(d.a)(a,2),i=s[0],u=s[1];return Object(R.jsxs)("td",{onClick:function(){u(!0),r(_({colId:t}))},className:we.a.techCol,children:[Object(R.jsx)(ie,{colId:t}),o.rows[0].cols.length>1&&i&&Object(R.jsx)(E.a,{onOutsideClick:function(){u(!1)},children:Object(R.jsx)(be,{colId:t,setColSelected:u})})]},t)},Ie=function(){var e=n.a.useContext(l).state,t=n.a.useState([]),c=Object(d.a)(t,2),o=c[0],r=c[1];return n.a.useEffect((function(){r(Array(function(e){var t=0;return e.forEach((function(e){e.cols.length>t&&(t=e.cols.length)})),t}(e.rows)).fill({}).map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{id:t+1})})))}),[e]),e.rows.length?Object(R.jsxs)("tr",{children:[Object(R.jsx)("td",{style:{width:10}}),o.map((function(e){return Object(R.jsx)(Oe,{colId:e.id},e.id)}))]}):null},he=c(12),Se=c.n(he),_e=function(e){var t=e.onChange,c=n.a.useReducer(m,i),o=Object(d.a)(c,2),r=o[0],a=o[1];return n.a.useEffect((function(){t&&"function"===typeof t&&t(r.rows),console.log(r.rows,"rows state")}),[r,t]),Object(R.jsx)(l.Provider,{value:{dispatch:a,state:r},children:Object(R.jsxs)("div",{className:Se.a.wrapper,children:[Object(R.jsx)("table",{className:k()(Se.a.table,Object(s.a)({},Se.a.filled,!!r.rows.length)),children:Object(R.jsxs)("tbody",{children:[Object(R.jsx)(Ie,{}),r.rows.map((function(e){return Object(R.jsx)(H,{rowData:e},e.id)}))]})}),Object(R.jsx)(ae,{})]})})};var xe=function(){return Object(R.jsx)("div",{className:"App",children:Object(R.jsx)(_e,{})})};a.a.render(Object(R.jsx)(n.a.StrictMode,{children:Object(R.jsx)(xe,{})}),document.getElementById("root"))},8:function(e,t,c){e.exports={wrapper:"ChangeBackground_wrapper__2Uwxj",colors:"ChangeBackground_colors__Je-TV",colorButton:"ChangeBackground_colorButton__2QEDl",transparent:"ChangeBackground_transparent__mqomV"}},9:function(e,t,c){e.exports={wrapper:"SelectionMenu_wrapper__2E3fb",selected:"SelectionMenu_selected__1dW4V",settingButton:"SelectionMenu_settingButton__2RZd1",menu:"SelectionMenu_menu__3_fZg"}}},[[57,1,2]]]);
//# sourceMappingURL=main.f7cb7d01.chunk.js.map